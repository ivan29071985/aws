{"uuid":"d70199e2-3e95-413e-9520-dc94f55bb5fd","historyId":"41f4166a-821c-5a90-822a-1ac986595c21","status":"passed","statusDetails":{},"stage":"finished","steps":[{"name":"\"before each\" hooks","steps":[{"status":"passed","statusDetails":{},"stage":"finished","steps":[{"status":"passed","statusDetails":{},"stage":"finished","steps":[],"attachments":[],"parameters":[],"start":1756818522604,"name":"will not intercept requests to save bodies","stop":1756818522605}],"attachments":[],"parameters":[{"name":"To access request bodies","value":"add environment variable: `allureAddBodiesToRequests`\n(value is requests split by comma that you wish to save, to save all set '*')"},{"name":"To skip this message","value":"add environment variable `allureSkipSteps: '*\\[cypress-allure-adapter\\]*' `"}],"start":1756818519866,"name":"\"before each\" hook: [cypress-allure-adapter]","stop":1756818522610},{"status":"passed","statusDetails":{},"stage":"finished","steps":[{"status":"passed","statusDetails":{},"stage":"finished","steps":[],"attachments":[],"parameters":[],"start":1756818522606,"name":"loginAsPaulo","stop":1756818522607},{"status":"passed","statusDetails":{},"stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"Response Status","value":"200"},{"name":"Request URL","value":"https://amei-homolog.amorsaude.com.br/api/v1/security/login"},{"name":"Request Body","value":"{\"email\":\"paulo.rick+1@amorsaude.com\",\"password\":\"Amor@100\"}"}],"start":1756818522607,"name":"request: POST, /api/v1/security/login","stop":1756818522729},{"status":"passed","statusDetails":{},"stage":"finished","steps":[],"attachments":[],"parameters":[],"start":1756818522729,"name":"refreshTokenAsPaulo","stop":1756818522730},{"status":"passed","statusDetails":{},"stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"Response Status","value":"201"},{"name":"Request URL","value":"https://amei-homolog.amorsaude.com.br/api/v1/security/refresh-token?clinicId=483"},{"name":"Request Body","value":"{\"automated_test\":\"automated_test\"}"}],"start":1756818522730,"name":"request: POST, /api/v1/security/refresh-token?clinicId=483","stop":1756818522781}],"attachments":[],"parameters":[],"start":1756818522610,"name":"\"before each\" hook","stop":1756818522787}],"status":"passed","statusDetails":{},"stage":"finished","attachments":[],"parameters":[],"start":1756818519866,"stop":1756818522787},{"status":"passed","statusDetails":{},"stage":"finished","steps":[],"attachments":[],"parameters":[{"name":"Response Status","value":"200"},{"name":"Request URL","value":"https://amei-homolog.amorsaude.com.br/api/v1/observability-interface"},{"name":"Request Body","value":""}],"start":1756818522784,"name":"request: GET, /api/v1/observability-interface","stop":1756818522822},{"status":"passed","statusDetails":{},"stage":"finished","steps":[],"attachments":[],"parameters":[],"start":1756818522828,"name":"assert: expected **200** to equal **200**","stop":1756818522828},{"status":"passed","statusDetails":{},"stage":"finished","steps":[],"attachments":[],"parameters":[],"start":1756818522828,"name":"assert: expected **<!doctype html>\\n<html lang=\"en\">\\n  <head>\\n    <meta charset=\"utf-8\" />\\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\" />\\n    <title>observability logs</title>\\n    <link rel=\"icon\" href=\"data:,\" />\\n    <!-- solução para o erro 404 do favicon -->\\n    <style>\\n      /* estilos gerais e de layout */\\n      body {\\n        font-family: 'segoe ui', tahoma, geneva, verdana, sans-serif;\\n        background-color: #f0f4f8;\\n        margin: 0;\\n        padding: 20px;\\n        transition: all 0.3s ease;\\n      }\\n\\n      .container {\\n        max-width: 1200px;\\n        margin: auto;\\n        background: white;\\n        padding: 20px;\\n        box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.1);\\n        border-radius: 8px;\\n        transition: all 0.3s ease;\\n      }\\n\\n      h1 {\\n        text-align: center;\\n        color: #333;\\n        transition: all 0.3s ease;\\n      }\\n\\n      .filters {\\n        display: flex;\\n        flex-wrap: wrap;\\n        gap: 10px;\\n        margin-bottom: 20px;\\n      }\\n\\n      .filters label {\\n        font-weight: bold;\\n      }\\n\\n      .filters input,\\n      .filters select,\\n      .filters button {\\n        padding: 10px;\\n        margin: 5px 0;\\n        border: 1px solid #ccc;\\n        border-radius: 4px;\\n        transition: all 0.3s ease;\\n      }\\n\\n      .filters button {\\n        background-color: #007bff;\\n        color: white;\\n        cursor: pointer;\\n      }\\n\\n      .filters button:hover {\\n        background-color: #0056b3;\\n      }\\n\\n      .filters input[type='date'] {\\n        width: calc(50% - 10px);\\n      }\\n\\n      .date-range-box {\\n        display: flex;\\n        gap: 10px;\\n        width: 100%;\\n      }\\n\\n      table {\\n        width: 100%;\\n        border-collapse: collapse;\\n        margin-bottom: 20px;\\n        transition: all 0.3s ease;\\n      }\\n\\n      table,\\n      th,\\n      td {\\n        border: 1px solid #ddd;\\n      }\\n\\n      th,\\n      td {\\n        padding: 12px;\\n        text-align: left;\\n        max-width: 200px; /* limitar largura das colunas */\\n        overflow: hidden;\\n        text-overflow: ellipsis;\\n        white-space: nowrap;\\n        transition: all 0.3s ease;\\n      }\\n\\n      th {\\n        background-color: #e9ecef;\\n      }\\n\\n      .pagination-controls {\\n        display: flex;\\n        justify-content: space-between;\\n        align-items: center;\\n        margin-top: 20px;\\n        transition: all 0.3s ease;\\n      }\\n\\n      .pagination-controls button {\\n        padding: 10px;\\n        border: 1px solid #007bff;\\n        background-color: #007bff;\\n        color: white;\\n        border-radius: 4px;\\n        cursor: pointer;\\n        transition: all 0.3s ease;\\n      }\\n\\n      .pagination-controls button:hover {\\n        background-color: #0056b3;\\n      }\\n\\n      .modal {\\n        display: none;\\n        position: fixed;\\n        z-index: 1;\\n        left: 0;\\n        top: 0;\\n        width: 100%;\\n        height: 100%;\\n        overflow: auto;\\n        background-color: rgba(0, 0, 0, 0.6);\\n      }\\n\\n      .modal-content {\\n        background-color: #fff;\\n        margin: 2% auto;\\n        padding: 20px;\\n        border: 1px solid #888;\\n        width: 90%;\\n        max-width: 1000px;\\n        border-radius: 8px;\\n        max-height: 90vh;\\n        overflow-y: auto;\\n        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);\\n        transition: all 0.3s ease;\\n      }\\n\\n      .modal-content div {\\n        margin-bottom: 20px;\\n        padding: 15px;\\n        border-radius: 8px;\\n        background-color: #f8f9fa;\\n        position: relative;\\n      }\\n\\n      .modal-content div:hover {\\n        background-color: #e9ecef;\\n      }\\n\\n      .close {\\n        color: #aaa;\\n        float: right;\\n        font-size: 28px;\\n        font-weight: bold;\\n        transition: all 0.3s ease;\\n      }\\n\\n      .close:hover,\\n      .close:focus {\\n        color: black;\\n        text-decoration: none;\\n        cursor: pointer;\\n      }\\n\\n      .error {\\n        color: red;\\n        margin-bottom: 20px;\\n        display: none;\\n        transition: all 0.3s ease;\\n      }\\n\\n      pre {\\n        background-color: #f8f9fa;\\n        padding: 10px;\\n        border-radius: 8px;\\n        overflow-x: auto;\\n        white-space: pre-wrap;\\n        word-wrap: break-word;\\n        margin-bottom: 10px;\\n      }\\n\\n      .json-key {\\n        color: #d73a49;\\n      }\\n\\n      .json-value {\\n        color: #22863a;\\n      }\\n\\n      .json-string {\\n        color: #032f62;\\n      }\\n\\n      .query-keyword {\\n        color: #d73a49;\\n        font-weight: bold;\\n      }\\n\\n      .query-string {\\n        color: #032f62;\\n      }\\n\\n      .query-value {\\n        color: #22863a;\\n      }\\n\\n      .btn-copy {\\n        background-color: #28a745;\\n        color: white;\\n        border: none;\\n        padding: 5px 10px;\\n        margin-bottom: 10px;\\n        cursor: pointer;\\n        border-radius: 4px;\\n        position: absolute;\\n        top: 10px;\\n        right: 10px;\\n        transition: all 0.3s ease;\\n      }\\n\\n      .btn-copy:hover {\\n        background-color: #218838;\\n      }\\n\\n      .btn-copy i {\\n        margin-right: 5px;\\n      }\\n\\n      .loader {\\n        position: fixed;\\n        z-index: 10;\\n        top: 0;\\n        left: 0;\\n        width: 100%;\\n        height: 100%;\\n        background: rgba(255, 255, 255, 0.8);\\n        display: flex;\\n        justify-content: center;\\n        align-items: center;\\n        display: none;\\n      }\\n\\n      .loader-content {\\n        padding: 20px;\\n        background: rgba(255, 255, 255, 0.9);\\n        backdrop-filter: blur(10px);\\n        border-radius: 10px;\\n        box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);\\n      }\\n\\n      .loader-content img {\\n        width: 50px;\\n        height: 50px;\\n      }\\n\\n      .rotate {\\n        animation: rotation 1s infinite linear;\\n      }\\n\\n      @keyframes rotation {\\n        from {\\n          transform: rotate(0deg);\\n        }\\n        to {\\n          transform: rotate(360deg);\\n        }\\n      }\\n\\n      #observabilitybutton {\\n        background-color: red;\\n        color: white;\\n        font-weight: 500;\\n        border: none;\\n        padding: 5px 10px;\\n        margin-bottom: 10px;\\n        cursor: pointer;\\n        border-radius: 4px;\\n        transition: all 0.3s ease;\\n        font-size: 14px;\\n        padding: 5px 10px;\\n      }\\n\\n      #observabilitybutton:hover {\\n        background-color: #c31a1a;\\n      }\\n\\n      #logoutbutton {\\n        background-color: #2848a7;\\n        color: white;\\n        border: none;\\n        padding: 5px 10px;\\n        margin-bottom: 10px;\\n        cursor: pointer;\\n        border-radius: 4px;\\n        position: absolute;\\n        top: 10%;\\n        right: 10%;\\n        transition: all 0.3s ease;\\n      }\\n\\n      .logoutbutton:hover {\\n        background-color: #1b6ab4;\\n      }\\n    </style>\\n  </head>\\n  <body>\\n    <div class=\"container\">\\n      <h1>observability logs</h1>\\n      <div>\\n        <div style=\"align-self: flex-end\">\\n          <button\\n            id=\"observabilitybutton\"\\n            onclick=\"gotoobservability()\"\\n            class=\"hidden\"\\n          >\\n            <- versionamento\\n          </button>\\n        </div>\\n\\n        <div style=\"align-self: flex-end\">\\n          <button id=\"logoutbutton\" onclick=\"logout()\" class=\"hidden\">\\n            logout\\n          </button>\\n        </div>\\n      </div>\\n      <div class=\"error\" id=\"error-message\"></div>\\n      <div class=\"filters\">\\n        <input type=\"text\" id=\"filter-id\" placeholder=\"id\" />\\n        <input\\n          type=\"text\"\\n          id=\"filter-endpointname\"\\n          placeholder=\"endpoint name\"\\n        />\\n        <input type=\"text\" id=\"filter-clinicname\" placeholder=\"clinic name\" />\\n        <input type=\"text\" id=\"filter-username\" placeholder=\"user name\" />\\n\\n        <select id=\"filter-http\">\\n          <option value=\"\">http method</option>\\n          <option value=\"get\">get</option>\\n          <option value=\"post\">post</option>\\n          <option value=\"put\">put</option>\\n          <option value=\"delete\">delete</option>\\n          <option value=\"patch\">patch</option>\\n        </select>\\n\\n        <div class=\"date-range-box\">\\n          <div>\\n            <label for=\"filter-initialdate\">data inicial:</label>\\n            <input type=\"date\" id=\"filter-initialdate\" />\\n          </div>\\n          <div>\\n            <label for=\"filter-finaldate\">data final:</label>\\n            <input type=\"date\" id=\"filter-finaldate\" />\\n          </div>\\n        </div>\\n\\n        <select id=\"page-size\" onchange=\"applyfilters()\">\\n          <option value=\"10\">10 por página</option>\\n          <option value=\"20\">20 por página</option>\\n          <option value=\"30\">30 por página</option>\\n          <option value=\"50\">50 por página</option>\\n        </select>\\n        <button onclick=\"applyfilters()\">filtrar</button>\\n      </div>\\n      <table>\\n        <thead>\\n          <tr>\\n            <th>id</th>\\n            <th>endpoint name</th>\\n            <th>clinic name</th>\\n            <th>username</th>\\n            <th>timestamp</th>\\n            <th>http method</th>\\n            <th>actions</th>\\n          </tr>\\n        </thead>\\n        <tbody id=\"log-table-body\">\\n          <!-- log rows will be populated here -->\\n        </tbody>\\n      </table>\\n      <div class=\"pagination-controls\">\\n        <button onclick=\"prevpage()\">anterior</button>\\n        <span id=\"page-info\"></span>\\n        <button onclick=\"nextpage()\">próxima</button>\\n      </div>\\n    </div>\\n\\n    <!-- the modal -->\\n    <div id=\"logmodal\" class=\"modal\">\\n      <div class=\"modal-content\">\\n        <span class=\"close\" onclick=\"closemodal()\">&times;</span>\\n        <div>\\n          <strong>frontend url:</strong> <span id=\"frontend-url\"></span>\\n          <button class=\"btn-copy\" onclick=\"copytext('frontend-url')\">\\n            <i class=\"fa fa-copy\"></i> copiar\\n          </button>\\n        </div>\\n        <div>\\n          <strong>id:</strong> <span id=\"log-id\"></span>\\n          <button class=\"btn-copy\" onclick=\"copytext('log-id')\">\\n            <i class=\"fa fa-copy\"></i> copiar\\n          </button>\\n        </div>\\n        <div>\\n          <strong>endpoint name:</strong> <span id=\"endpoint-name\"></span>\\n          <button class=\"btn-copy\" onclick=\"copytext('endpoint-name')\">\\n            <i class=\"fa fa-copy\"></i> copiar\\n          </button>\\n        </div>\\n        <div>\\n          <strong>clinic name:</strong> <span id=\"clinic-name\"></span>\\n          <button class=\"btn-copy\" onclick=\"copytext('clinic-name')\">\\n            <i class=\"fa fa-copy\"></i> copiar\\n          </button>\\n        </div>\\n        <div>\\n          <strong>username:</strong> <span id=\"username\"></span>\\n          <button class=\"btn-copy\" onclick=\"copytext('username')\">\\n            <i class=\"fa fa-copy\"></i> copiar\\n          </button>\\n        </div>\\n        <div>\\n          <strong>timestamp:</strong> <span id=\"timestamp\"></span>\\n          <button class=\"btn-copy\" onclick=\"copytext('timestamp')\">\\n            <i class=\"fa fa-copy\"></i> copiar\\n          </button>\\n        </div>\\n        <div>\\n          <strong>http method:</strong> <span id=\"http-method\"></span>\\n          <button class=\"btn-copy\" onclick=\"copytext('http-method')\">\\n            <i class=\"fa fa-copy\"></i> copiar\\n          </button>\\n        </div>\\n        <div>\\n          <strong>request body:</strong>\\n          <pre id=\"request-body\"></pre>\\n          <button class=\"btn-copy\" onclick=\"copytext('request-body')\">\\n            <i class=\"fa fa-copy\"></i> copiar\\n          </button>\\n        </div>\\n        <div>\\n          <strong>response body:</strong>\\n          <pre id=\"response-body\"></pre>\\n          <button class=\"btn-copy\" onclick=\"copytext('response-body')\">\\n            <i class=\"fa fa-copy\"></i> copiar\\n          </button>\\n        </div>\\n        <div>\\n          <strong>executed queries:</strong>\\n          <pre id=\"executed-queries\"></pre>\\n          <button class=\"btn-copy\" onclick=\"copytext('executed-queries')\">\\n            <i class=\"fa fa-copy\"></i> copiar\\n          </button>\\n        </div>\\n\\n        <div>\\n          <strong>curl:</strong>\\n          <pre id=\"curl\"></pre>\\n          <button class=\"btn-copy\" onclick=\"copytext('curl')\">\\n            <i class=\"fa fa-copy\"></i> copiar\\n          </button>\\n        </div>\\n        <div>\\n          <strong>request info:</strong>\\n          <pre id=\"request-info\"></pre>\\n          <button class=\"btn-copy\" onclick=\"copytext('request-info')\">\\n            <i class=\"fa fa-copy\"></i> copiar\\n          </button>\\n        </div>\\n      </div>\\n    </div>\\n\\n    <!-- loader -->\\n    <div class=\"loader\" id=\"loader\">\\n      <div class=\"loader-content\">\\n        <img\\n          src=\"https://media.giphy.com/media/ssgvbe1m3n93g/giphy.gif\"\\n          alt=\"loading...\"\\n          class=\"rotate\"\\n        />\\n      </div>\\n    </div>\\n\\n    <script>\\n      const apiurl = `${window.location.origin}/api/v1/observability-logs`;\\n      let logs = [];\\n      let currentpage = 1;\\n      let pagesize = 10;\\n\\n      document.addeventlistener('keypress', function (e) {\\n        if (e.key === 'enter') {\\n          applyfilters();\\n        }\\n      });\\n\\n      async function fetchlogs(params = {}) {\\n        showloader();\\n        const url = new url(apiurl);\\n        object.keys(params).foreach((key) =>\\n          url.searchparams.append(key, params[key]),\\n        );\\n        url.searchparams.append('page', currentpage);\\n        url.searchparams.append('limit', pagesize);\\n\\n        // obtém o token da sessionstorage\\n        const authtoken = sessionstorage.getitem('authtoken');\\n\\n        try {\\n          console.log(authtoken);\\n          const response = await fetch(url, {\\n            method: 'get',\\n            headers: {\\n              authorization: `bearer ${authtoken}`, // adiciona o token ao cabeçalho authorization\\n              'content-type': 'application/json',\\n            },\\n          });\\n          if (!response.ok)\\n            throw new error('unauthorized || failed to fetch logs');\\n\\n          const result = await response.json();\\n          logs = result; // supondo que a resposta já esteja paginada\\n          renderpage();\\n        } catch (error) {\\n          showerror(error.message);\\n        } finally {\\n          hideloader();\\n        }\\n      }\\n\\n      function renderpage() {\\n        const logtablebody = document.getelementbyid('log-table-body');\\n        logtablebody.innerhtml = '';\\n\\n        if (logs.length === 0) {\\n          showerror('no logs found with the specified filters.');\\n          return;\\n        }\\n\\n        logs.foreach((log) => {\\n          const row = `<tr>\\n                      <td>${log.id}</td>\\n                      <td title=\"${log.endpointname}\">${log.endpointname}</td>\\n                      <td title=\"${log.clinicname || ''}\">${log.clinicname || ''}</td>\\n                      <td>${log.username || ''}</td>\\n                      <td>${new date(log.timestamp).tolocalestring()}</td>\\n                      <td>${log.http || ''}</td>\\n                      <td><button onclick=\"viewdetails(${log.id})\">view</button></td>\\n                    </tr>`;\\n          logtablebody.innerhtml += row;\\n        });\\n\\n        updatepageinfo();\\n      }\\n\\n      function updatepageinfo() {\\n        document.getelementbyid('page-info').textcontent =\\n          `página ${currentpage}`;\\n      }\\n\\n      function applyfilters() {\\n        const filters = {\\n          id: document.getelementbyid('filter-id').value,\\n          endpointname: document.getelementbyid('filter-endpointname').value,\\n          clinicname: document.getelementbyid('filter-clinicname').value,\\n          username: document.getelementbyid('filter-username').value,\\n          http: document.getelementbyid('filter-http').value,\\n          initialdate: document.getelementbyid('filter-initialdate').value,\\n          finaldate: document.getelementbyid('filter-finaldate').value,\\n        };\\n\\n        pagesize = parseint(document.getelementbyid('page-size').value, 10);\\n        fetchlogs(filters);\\n      }\\n\\n      function viewdetails(logid) {\\n        const log = logs.find((log) => log.id === logid);\\n        if (log) {\\n          document.getelementbyid('frontend-url').textcontent =\\n            log.frontendurl || 'n/a';\\n          document.getelementbyid('log-id').textcontent = log.id;\\n          document.getelementbyid('endpoint-name').textcontent =\\n            log.endpointname;\\n          document.getelementbyid('clinic-name').textcontent =\\n            log.clinicname || 'n/a';\\n          document.getelementbyid('username').textcontent =\\n            log.username || 'n/a';\\n          document.getelementbyid('timestamp').textcontent = new date(\\n            log.timestamp,\\n          ).tolocalestring();\\n          document.getelementbyid('http-method').textcontent =\\n            log.http || 'n/a';\\n          document.getelementbyid('request-body').innerhtml = formatjson(\\n            log.requestbody,\\n          );\\n          document.getelementbyid('response-body').innerhtml = formatjson(\\n            log.responsebody,\\n          );\\n          document.getelementbyid('executed-queries').innerhtml = formatqueries(\\n            log.executedqueries,\\n          );\\n          document.getelementbyid('curl').textcontent = log.curl || 'n/a';\\n          document.getelementbyid('request-info').innerhtml = formatjson(\\n            log.requestinfo,\\n          );\\n          document.getelementbyid('logmodal').style.display = 'block';\\n        }\\n      }\\n\\n      function formatjson(jsonstring) {\\n        if (!jsonstring) return 'n/a';\\n        try {\\n          const jsonobject = json.parse(jsonstring);\\n          const formattedjson = json.stringify(jsonobject, null, 2)\\n            .replace(/\\\\\"([^(\\\\\")\"]+)\\\\\":/g, '<span class=\"json-key\">\"$1\":</span>')\\n            .replace(/: \\\\\"(.*?)\\\\\"/g, ': <span class=\"json-string\">\"$1\"</span>')\\n            .replace(/: (\\\\d+)/g, ': <span class=\"json-value\">$1</span>');\\n          return `<pre>${formattedjson}</pre>`;\\n        } catch (e) {\\n          return '<pre>n/a</pre>';\\n        }\\n      }\\n\\n      function formatqueries(querystring) {\\n        if (!querystring) return 'n/a';\\n\\n        try {\\n          const formattedjson = json.stringify(querystring, null, 2)\\n            .replace(/\\\\\"([^(\\\\\")\"]+)\\\\\":/g, '<span class=\"json-key\">\"$1\":</span>')\\n            .replace(/: \\\\\"(.*?)\\\\\"/g, ': <span class=\"json-string\">\"$1\"</span>')\\n            .replace(/: (\\\\d+)/g, ': <span class=\"json-value\">$1</span>');\\n          return `<pre>${formattedjson}</pre>`;\\n        } catch (e) {\\n          return '<pre>n/a</pre>';\\n        }\\n      }\\n\\n      function closemodal() {\\n        document.getelementbyid('logmodal').style.display = 'none';\\n      }\\n\\n      function showerror(message) {\\n        const errormessage = document.getelementbyid('error-message');\\n        errormessage.style.display = 'block';\\n        errormessage.textcontent = message;\\n      }\\n\\n      function nextpage() {\\n        currentpage++;\\n        applyfilters();\\n      }\\n\\n      function prevpage() {\\n        if (currentpage > 1) {\\n          currentpage--;\\n          applyfilters();\\n        }\\n      }\\n\\n      function showloader() {\\n        document.getelementbyid('loader').style.display = 'flex';\\n      }\\n\\n      function hideloader() {\\n        document.getelementbyid('loader').style.display = 'none';\\n      }\\n\\n      function copytext(elementid) {\\n        const text = document.getelementbyid(elementid).innertext;\\n        navigator.clipboard.writetext(text).then(() => {\\n          alert('conteúdo copiado para a área de transferência!');\\n        });\\n      }\\n\\n      function gotoobservability() {\\n        window.location.href = '/api/v1/versioning-interface';\\n      }\\n\\n      function logout() {\\n        sessionstorage.clear();\\n        localstorage.clear();\\n        gotoobservability();\\n      }\\n\\n      window.onclick = function (event) {\\n        if (event.target == document.getelementbyid('logmodal')) {\\n          closemodal();\\n        }\\n      };\\n    </script>\\n    <!-- adiciona o ícone da biblioteca font awesome para o ícone de cópia -->\\n    <link\\n      rel=\"stylesheet\"\\n      href=\"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css\"\\n    />\\n  </body>\\n</html>\\n** to include **<!doctype html>**","stop":1756818522828},{"status":"passed","statusDetails":{},"stage":"finished","steps":[],"attachments":[],"parameters":[],"start":1756818522828,"name":"assert: expected **<!doctype html>\\n<html lang=\"en\">\\n  <head>\\n    <meta charset=\"UTF-8\" />\\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\" />\\n    <title>Observability Logs</title>\\n    <link rel=\"icon\" href=\"data:,\" />\\n    <!-- Solução para o erro 404 do favicon -->\\n    <style>\\n      /* Estilos gerais e de layout */\\n      body {\\n        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;\\n        background-color: #f0f4f8;\\n        margin: 0;\\n        padding: 20px;\\n        transition: all 0.3s ease;\\n      }\\n\\n      .container {\\n        max-width: 1200px;\\n        margin: auto;\\n        background: white;\\n        padding: 20px;\\n        box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.1);\\n        border-radius: 8px;\\n        transition: all 0.3s ease;\\n      }\\n\\n      h1 {\\n        text-align: center;\\n        color: #333;\\n        transition: all 0.3s ease;\\n      }\\n\\n      .filters {\\n        display: flex;\\n        flex-wrap: wrap;\\n        gap: 10px;\\n        margin-bottom: 20px;\\n      }\\n\\n      .filters label {\\n        font-weight: bold;\\n      }\\n\\n      .filters input,\\n      .filters select,\\n      .filters button {\\n        padding: 10px;\\n        margin: 5px 0;\\n        border: 1px solid #ccc;\\n        border-radius: 4px;\\n        transition: all 0.3s ease;\\n      }\\n\\n      .filters button {\\n        background-color: #007bff;\\n        color: white;\\n        cursor: pointer;\\n      }\\n\\n      .filters button:hover {\\n        background-color: #0056b3;\\n      }\\n\\n      .filters input[type='date'] {\\n        width: calc(50% - 10px);\\n      }\\n\\n      .date-range-box {\\n        display: flex;\\n        gap: 10px;\\n        width: 100%;\\n      }\\n\\n      table {\\n        width: 100%;\\n        border-collapse: collapse;\\n        margin-bottom: 20px;\\n        transition: all 0.3s ease;\\n      }\\n\\n      table,\\n      th,\\n      td {\\n        border: 1px solid #ddd;\\n      }\\n\\n      th,\\n      td {\\n        padding: 12px;\\n        text-align: left;\\n        max-width: 200px; /* Limitar largura das colunas */\\n        overflow: hidden;\\n        text-overflow: ellipsis;\\n        white-space: nowrap;\\n        transition: all 0.3s ease;\\n      }\\n\\n      th {\\n        background-color: #e9ecef;\\n      }\\n\\n      .pagination-controls {\\n        display: flex;\\n        justify-content: space-between;\\n        align-items: center;\\n        margin-top: 20px;\\n        transition: all 0.3s ease;\\n      }\\n\\n      .pagination-controls button {\\n        padding: 10px;\\n        border: 1px solid #007bff;\\n        background-color: #007bff;\\n        color: white;\\n        border-radius: 4px;\\n        cursor: pointer;\\n        transition: all 0.3s ease;\\n      }\\n\\n      .pagination-controls button:hover {\\n        background-color: #0056b3;\\n      }\\n\\n      .modal {\\n        display: none;\\n        position: fixed;\\n        z-index: 1;\\n        left: 0;\\n        top: 0;\\n        width: 100%;\\n        height: 100%;\\n        overflow: auto;\\n        background-color: rgba(0, 0, 0, 0.6);\\n      }\\n\\n      .modal-content {\\n        background-color: #fff;\\n        margin: 2% auto;\\n        padding: 20px;\\n        border: 1px solid #888;\\n        width: 90%;\\n        max-width: 1000px;\\n        border-radius: 8px;\\n        max-height: 90vh;\\n        overflow-y: auto;\\n        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);\\n        transition: all 0.3s ease;\\n      }\\n\\n      .modal-content div {\\n        margin-bottom: 20px;\\n        padding: 15px;\\n        border-radius: 8px;\\n        background-color: #f8f9fa;\\n        position: relative;\\n      }\\n\\n      .modal-content div:hover {\\n        background-color: #e9ecef;\\n      }\\n\\n      .close {\\n        color: #aaa;\\n        float: right;\\n        font-size: 28px;\\n        font-weight: bold;\\n        transition: all 0.3s ease;\\n      }\\n\\n      .close:hover,\\n      .close:focus {\\n        color: black;\\n        text-decoration: none;\\n        cursor: pointer;\\n      }\\n\\n      .error {\\n        color: red;\\n        margin-bottom: 20px;\\n        display: none;\\n        transition: all 0.3s ease;\\n      }\\n\\n      pre {\\n        background-color: #f8f9fa;\\n        padding: 10px;\\n        border-radius: 8px;\\n        overflow-x: auto;\\n        white-space: pre-wrap;\\n        word-wrap: break-word;\\n        margin-bottom: 10px;\\n      }\\n\\n      .json-key {\\n        color: #d73a49;\\n      }\\n\\n      .json-value {\\n        color: #22863a;\\n      }\\n\\n      .json-string {\\n        color: #032f62;\\n      }\\n\\n      .query-keyword {\\n        color: #d73a49;\\n        font-weight: bold;\\n      }\\n\\n      .query-string {\\n        color: #032f62;\\n      }\\n\\n      .query-value {\\n        color: #22863a;\\n      }\\n\\n      .btn-copy {\\n        background-color: #28a745;\\n        color: white;\\n        border: none;\\n        padding: 5px 10px;\\n        margin-bottom: 10px;\\n        cursor: pointer;\\n        border-radius: 4px;\\n        position: absolute;\\n        top: 10px;\\n        right: 10px;\\n        transition: all 0.3s ease;\\n      }\\n\\n      .btn-copy:hover {\\n        background-color: #218838;\\n      }\\n\\n      .btn-copy i {\\n        margin-right: 5px;\\n      }\\n\\n      .loader {\\n        position: fixed;\\n        z-index: 10;\\n        top: 0;\\n        left: 0;\\n        width: 100%;\\n        height: 100%;\\n        background: rgba(255, 255, 255, 0.8);\\n        display: flex;\\n        justify-content: center;\\n        align-items: center;\\n        display: none;\\n      }\\n\\n      .loader-content {\\n        padding: 20px;\\n        background: rgba(255, 255, 255, 0.9);\\n        backdrop-filter: blur(10px);\\n        border-radius: 10px;\\n        box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);\\n      }\\n\\n      .loader-content img {\\n        width: 50px;\\n        height: 50px;\\n      }\\n\\n      .rotate {\\n        animation: rotation 1s infinite linear;\\n      }\\n\\n      @keyframes rotation {\\n        from {\\n          transform: rotate(0deg);\\n        }\\n        to {\\n          transform: rotate(360deg);\\n        }\\n      }\\n\\n      #observabilityButton {\\n        background-color: red;\\n        color: white;\\n        font-weight: 500;\\n        border: none;\\n        padding: 5px 10px;\\n        margin-bottom: 10px;\\n        cursor: pointer;\\n        border-radius: 4px;\\n        transition: all 0.3s ease;\\n        font-size: 14px;\\n        padding: 5px 10px;\\n      }\\n\\n      #observabilityButton:hover {\\n        background-color: #c31a1a;\\n      }\\n\\n      #logoutButton {\\n        background-color: #2848a7;\\n        color: white;\\n        border: none;\\n        padding: 5px 10px;\\n        margin-bottom: 10px;\\n        cursor: pointer;\\n        border-radius: 4px;\\n        position: absolute;\\n        top: 10%;\\n        right: 10%;\\n        transition: all 0.3s ease;\\n      }\\n\\n      .logoutButton:hover {\\n        background-color: #1b6ab4;\\n      }\\n    </style>\\n  </head>\\n  <body>\\n    <div class=\"container\">\\n      <h1>Observability Logs</h1>\\n      <div>\\n        <div style=\"align-self: flex-end\">\\n          <button\\n            id=\"observabilityButton\"\\n            onclick=\"goToObservability()\"\\n            class=\"hidden\"\\n          >\\n            <- Versionamento\\n          </button>\\n        </div>\\n\\n        <div style=\"align-self: flex-end\">\\n          <button id=\"logoutButton\" onclick=\"logout()\" class=\"hidden\">\\n            Logout\\n          </button>\\n        </div>\\n      </div>\\n      <div class=\"error\" id=\"error-message\"></div>\\n      <div class=\"filters\">\\n        <input type=\"text\" id=\"filter-id\" placeholder=\"ID\" />\\n        <input\\n          type=\"text\"\\n          id=\"filter-endpointName\"\\n          placeholder=\"Endpoint Name\"\\n        />\\n        <input type=\"text\" id=\"filter-clinicName\" placeholder=\"Clinic Name\" />\\n        <input type=\"text\" id=\"filter-userName\" placeholder=\"User Name\" />\\n\\n        <select id=\"filter-http\">\\n          <option value=\"\">HTTP Method</option>\\n          <option value=\"GET\">GET</option>\\n          <option value=\"POST\">POST</option>\\n          <option value=\"PUT\">PUT</option>\\n          <option value=\"DELETE\">DELETE</option>\\n          <option value=\"PATCH\">PATCH</option>\\n        </select>\\n\\n        <div class=\"date-range-box\">\\n          <div>\\n            <label for=\"filter-initialDate\">Data Inicial:</label>\\n            <input type=\"date\" id=\"filter-initialDate\" />\\n          </div>\\n          <div>\\n            <label for=\"filter-finalDate\">Data Final:</label>\\n            <input type=\"date\" id=\"filter-finalDate\" />\\n          </div>\\n        </div>\\n\\n        <select id=\"page-size\" onchange=\"applyFilters()\">\\n          <option value=\"10\">10 por página</option>\\n          <option value=\"20\">20 por página</option>\\n          <option value=\"30\">30 por página</option>\\n          <option value=\"50\">50 por página</option>\\n        </select>\\n        <button onclick=\"applyFilters()\">Filtrar</button>\\n      </div>\\n      <table>\\n        <thead>\\n          <tr>\\n            <th>ID</th>\\n            <th>Endpoint Name</th>\\n            <th>Clinic Name</th>\\n            <th>Username</th>\\n            <th>Timestamp</th>\\n            <th>HTTP Method</th>\\n            <th>Actions</th>\\n          </tr>\\n        </thead>\\n        <tbody id=\"log-table-body\">\\n          <!-- Log rows will be populated here -->\\n        </tbody>\\n      </table>\\n      <div class=\"pagination-controls\">\\n        <button onclick=\"prevPage()\">Anterior</button>\\n        <span id=\"page-info\"></span>\\n        <button onclick=\"nextPage()\">Próxima</button>\\n      </div>\\n    </div>\\n\\n    <!-- The Modal -->\\n    <div id=\"logModal\" class=\"modal\">\\n      <div class=\"modal-content\">\\n        <span class=\"close\" onclick=\"closeModal()\">&times;</span>\\n        <div>\\n          <strong>Frontend URL:</strong> <span id=\"frontend-url\"></span>\\n          <button class=\"btn-copy\" onclick=\"copyText('frontend-url')\">\\n            <i class=\"fa fa-copy\"></i> Copiar\\n          </button>\\n        </div>\\n        <div>\\n          <strong>ID:</strong> <span id=\"log-id\"></span>\\n          <button class=\"btn-copy\" onclick=\"copyText('log-id')\">\\n            <i class=\"fa fa-copy\"></i> Copiar\\n          </button>\\n        </div>\\n        <div>\\n          <strong>Endpoint Name:</strong> <span id=\"endpoint-name\"></span>\\n          <button class=\"btn-copy\" onclick=\"copyText('endpoint-name')\">\\n            <i class=\"fa fa-copy\"></i> Copiar\\n          </button>\\n        </div>\\n        <div>\\n          <strong>Clinic Name:</strong> <span id=\"clinic-name\"></span>\\n          <button class=\"btn-copy\" onclick=\"copyText('clinic-name')\">\\n            <i class=\"fa fa-copy\"></i> Copiar\\n          </button>\\n        </div>\\n        <div>\\n          <strong>Username:</strong> <span id=\"username\"></span>\\n          <button class=\"btn-copy\" onclick=\"copyText('username')\">\\n            <i class=\"fa fa-copy\"></i> Copiar\\n          </button>\\n        </div>\\n        <div>\\n          <strong>Timestamp:</strong> <span id=\"timestamp\"></span>\\n          <button class=\"btn-copy\" onclick=\"copyText('timestamp')\">\\n            <i class=\"fa fa-copy\"></i> Copiar\\n          </button>\\n        </div>\\n        <div>\\n          <strong>HTTP Method:</strong> <span id=\"http-method\"></span>\\n          <button class=\"btn-copy\" onclick=\"copyText('http-method')\">\\n            <i class=\"fa fa-copy\"></i> Copiar\\n          </button>\\n        </div>\\n        <div>\\n          <strong>Request Body:</strong>\\n          <pre id=\"request-body\"></pre>\\n          <button class=\"btn-copy\" onclick=\"copyText('request-body')\">\\n            <i class=\"fa fa-copy\"></i> Copiar\\n          </button>\\n        </div>\\n        <div>\\n          <strong>Response Body:</strong>\\n          <pre id=\"response-body\"></pre>\\n          <button class=\"btn-copy\" onclick=\"copyText('response-body')\">\\n            <i class=\"fa fa-copy\"></i> Copiar\\n          </button>\\n        </div>\\n        <div>\\n          <strong>Executed Queries:</strong>\\n          <pre id=\"executed-queries\"></pre>\\n          <button class=\"btn-copy\" onclick=\"copyText('executed-queries')\">\\n            <i class=\"fa fa-copy\"></i> Copiar\\n          </button>\\n        </div>\\n\\n        <div>\\n          <strong>CURL:</strong>\\n          <pre id=\"curl\"></pre>\\n          <button class=\"btn-copy\" onclick=\"copyText('curl')\">\\n            <i class=\"fa fa-copy\"></i> Copiar\\n          </button>\\n        </div>\\n        <div>\\n          <strong>Request Info:</strong>\\n          <pre id=\"request-info\"></pre>\\n          <button class=\"btn-copy\" onclick=\"copyText('request-info')\">\\n            <i class=\"fa fa-copy\"></i> Copiar\\n          </button>\\n        </div>\\n      </div>\\n    </div>\\n\\n    <!-- Loader -->\\n    <div class=\"loader\" id=\"loader\">\\n      <div class=\"loader-content\">\\n        <img\\n          src=\"https://media.giphy.com/media/sSgvbe1m3n93G/giphy.gif\"\\n          alt=\"Loading...\"\\n          class=\"rotate\"\\n        />\\n      </div>\\n    </div>\\n\\n    <script>\\n      const apiUrl = `${window.location.origin}/api/v1/observability-logs`;\\n      let logs = [];\\n      let currentPage = 1;\\n      let pageSize = 10;\\n\\n      document.addEventListener('keypress', function (e) {\\n        if (e.key === 'Enter') {\\n          applyFilters();\\n        }\\n      });\\n\\n      async function fetchLogs(params = {}) {\\n        showLoader();\\n        const url = new URL(apiUrl);\\n        Object.keys(params).forEach((key) =>\\n          url.searchParams.append(key, params[key]),\\n        );\\n        url.searchParams.append('page', currentPage);\\n        url.searchParams.append('limit', pageSize);\\n\\n        // Obtém o token da sessionStorage\\n        const authToken = sessionStorage.getItem('authToken');\\n\\n        try {\\n          console.log(authToken);\\n          const response = await fetch(url, {\\n            method: 'GET',\\n            headers: {\\n              Authorization: `Bearer ${authToken}`, // Adiciona o token ao cabeçalho Authorization\\n              'Content-Type': 'application/json',\\n            },\\n          });\\n          if (!response.ok)\\n            throw new Error('Unauthorized || Failed to fetch logs');\\n\\n          const result = await response.json();\\n          logs = result; // Supondo que a resposta já esteja paginada\\n          renderPage();\\n        } catch (error) {\\n          showError(error.message);\\n        } finally {\\n          hideLoader();\\n        }\\n      }\\n\\n      function renderPage() {\\n        const logTableBody = document.getElementById('log-table-body');\\n        logTableBody.innerHTML = '';\\n\\n        if (logs.length === 0) {\\n          showError('No logs found with the specified filters.');\\n          return;\\n        }\\n\\n        logs.forEach((log) => {\\n          const row = `<tr>\\n                      <td>${log.id}</td>\\n                      <td title=\"${log.endpointName}\">${log.endpointName}</td>\\n                      <td title=\"${log.clinicName || ''}\">${log.clinicName || ''}</td>\\n                      <td>${log.username || ''}</td>\\n                      <td>${new Date(log.timestamp).toLocaleString()}</td>\\n                      <td>${log.http || ''}</td>\\n                      <td><button onclick=\"viewDetails(${log.id})\">View</button></td>\\n                    </tr>`;\\n          logTableBody.innerHTML += row;\\n        });\\n\\n        updatePageInfo();\\n      }\\n\\n      function updatePageInfo() {\\n        document.getElementById('page-info').textContent =\\n          `Página ${currentPage}`;\\n      }\\n\\n      function applyFilters() {\\n        const filters = {\\n          id: document.getElementById('filter-id').value,\\n          endpointName: document.getElementById('filter-endpointName').value,\\n          clinicName: document.getElementById('filter-clinicName').value,\\n          userName: document.getElementById('filter-userName').value,\\n          http: document.getElementById('filter-http').value,\\n          initialDate: document.getElementById('filter-initialDate').value,\\n          finalDate: document.getElementById('filter-finalDate').value,\\n        };\\n\\n        pageSize = parseInt(document.getElementById('page-size').value, 10);\\n        fetchLogs(filters);\\n      }\\n\\n      function viewDetails(logId) {\\n        const log = logs.find((log) => log.id === logId);\\n        if (log) {\\n          document.getElementById('frontend-url').textContent =\\n            log.frontendUrl || 'N/A';\\n          document.getElementById('log-id').textContent = log.id;\\n          document.getElementById('endpoint-name').textContent =\\n            log.endpointName;\\n          document.getElementById('clinic-name').textContent =\\n            log.clinicName || 'N/A';\\n          document.getElementById('username').textContent =\\n            log.username || 'N/A';\\n          document.getElementById('timestamp').textContent = new Date(\\n            log.timestamp,\\n          ).toLocaleString();\\n          document.getElementById('http-method').textContent =\\n            log.http || 'N/A';\\n          document.getElementById('request-body').innerHTML = formatJSON(\\n            log.requestBody,\\n          );\\n          document.getElementById('response-body').innerHTML = formatJSON(\\n            log.responseBody,\\n          );\\n          document.getElementById('executed-queries').innerHTML = formatQueries(\\n            log.executedQueries,\\n          );\\n          document.getElementById('curl').textContent = log.curl || 'N/A';\\n          document.getElementById('request-info').innerHTML = formatJSON(\\n            log.requestInfo,\\n          );\\n          document.getElementById('logModal').style.display = 'block';\\n        }\\n      }\\n\\n      function formatJSON(jsonString) {\\n        if (!jsonString) return 'N/A';\\n        try {\\n          const jsonObject = JSON.parse(jsonString);\\n          const formattedJSON = JSON.stringify(jsonObject, null, 2)\\n            .replace(/\\\\\"([^(\\\\\")\"]+)\\\\\":/g, '<span class=\"json-key\">\"$1\":</span>')\\n            .replace(/: \\\\\"(.*?)\\\\\"/g, ': <span class=\"json-string\">\"$1\"</span>')\\n            .replace(/: (\\\\d+)/g, ': <span class=\"json-value\">$1</span>');\\n          return `<pre>${formattedJSON}</pre>`;\\n        } catch (e) {\\n          return '<pre>N/A</pre>';\\n        }\\n      }\\n\\n      function formatQueries(queryString) {\\n        if (!queryString) return 'N/A';\\n\\n        try {\\n          const formattedJSON = JSON.stringify(queryString, null, 2)\\n            .replace(/\\\\\"([^(\\\\\")\"]+)\\\\\":/g, '<span class=\"json-key\">\"$1\":</span>')\\n            .replace(/: \\\\\"(.*?)\\\\\"/g, ': <span class=\"json-string\">\"$1\"</span>')\\n            .replace(/: (\\\\d+)/g, ': <span class=\"json-value\">$1</span>');\\n          return `<pre>${formattedJSON}</pre>`;\\n        } catch (e) {\\n          return '<pre>N/A</pre>';\\n        }\\n      }\\n\\n      function closeModal() {\\n        document.getElementById('logModal').style.display = 'none';\\n      }\\n\\n      function showError(message) {\\n        const errorMessage = document.getElementById('error-message');\\n        errorMessage.style.display = 'block';\\n        errorMessage.textContent = message;\\n      }\\n\\n      function nextPage() {\\n        currentPage++;\\n        applyFilters();\\n      }\\n\\n      function prevPage() {\\n        if (currentPage > 1) {\\n          currentPage--;\\n          applyFilters();\\n        }\\n      }\\n\\n      function showLoader() {\\n        document.getElementById('loader').style.display = 'flex';\\n      }\\n\\n      function hideLoader() {\\n        document.getElementById('loader').style.display = 'none';\\n      }\\n\\n      function copyText(elementId) {\\n        const text = document.getElementById(elementId).innerText;\\n        navigator.clipboard.writeText(text).then(() => {\\n          alert('Conteúdo copiado para a área de transferência!');\\n        });\\n      }\\n\\n      function goToObservability() {\\n        window.location.href = '/api/v1/versioning-interface';\\n      }\\n\\n      function logout() {\\n        sessionStorage.clear();\\n        localStorage.clear();\\n        goToObservability();\\n      }\\n\\n      window.onclick = function (event) {\\n        if (event.target == document.getElementById('logModal')) {\\n          closeModal();\\n        }\\n      };\\n    </script>\\n    <!-- Adiciona o ícone da biblioteca Font Awesome para o ícone de cópia -->\\n    <link\\n      rel=\"stylesheet\"\\n      href=\"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css\"\\n    />\\n  </body>\\n</html>\\n** to include **<html**","stop":1756818522828},{"status":"passed","statusDetails":{},"stage":"finished","steps":[],"attachments":[],"parameters":[],"start":1756818522828,"name":"assert: expected **<!doctype html>\\n<html lang=\"en\">\\n  <head>\\n    <meta charset=\"UTF-8\" />\\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\" />\\n    <title>Observability Logs</title>\\n    <link rel=\"icon\" href=\"data:,\" />\\n    <!-- Solução para o erro 404 do favicon -->\\n    <style>\\n      /* Estilos gerais e de layout */\\n      body {\\n        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;\\n        background-color: #f0f4f8;\\n        margin: 0;\\n        padding: 20px;\\n        transition: all 0.3s ease;\\n      }\\n\\n      .container {\\n        max-width: 1200px;\\n        margin: auto;\\n        background: white;\\n        padding: 20px;\\n        box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.1);\\n        border-radius: 8px;\\n        transition: all 0.3s ease;\\n      }\\n\\n      h1 {\\n        text-align: center;\\n        color: #333;\\n        transition: all 0.3s ease;\\n      }\\n\\n      .filters {\\n        display: flex;\\n        flex-wrap: wrap;\\n        gap: 10px;\\n        margin-bottom: 20px;\\n      }\\n\\n      .filters label {\\n        font-weight: bold;\\n      }\\n\\n      .filters input,\\n      .filters select,\\n      .filters button {\\n        padding: 10px;\\n        margin: 5px 0;\\n        border: 1px solid #ccc;\\n        border-radius: 4px;\\n        transition: all 0.3s ease;\\n      }\\n\\n      .filters button {\\n        background-color: #007bff;\\n        color: white;\\n        cursor: pointer;\\n      }\\n\\n      .filters button:hover {\\n        background-color: #0056b3;\\n      }\\n\\n      .filters input[type='date'] {\\n        width: calc(50% - 10px);\\n      }\\n\\n      .date-range-box {\\n        display: flex;\\n        gap: 10px;\\n        width: 100%;\\n      }\\n\\n      table {\\n        width: 100%;\\n        border-collapse: collapse;\\n        margin-bottom: 20px;\\n        transition: all 0.3s ease;\\n      }\\n\\n      table,\\n      th,\\n      td {\\n        border: 1px solid #ddd;\\n      }\\n\\n      th,\\n      td {\\n        padding: 12px;\\n        text-align: left;\\n        max-width: 200px; /* Limitar largura das colunas */\\n        overflow: hidden;\\n        text-overflow: ellipsis;\\n        white-space: nowrap;\\n        transition: all 0.3s ease;\\n      }\\n\\n      th {\\n        background-color: #e9ecef;\\n      }\\n\\n      .pagination-controls {\\n        display: flex;\\n        justify-content: space-between;\\n        align-items: center;\\n        margin-top: 20px;\\n        transition: all 0.3s ease;\\n      }\\n\\n      .pagination-controls button {\\n        padding: 10px;\\n        border: 1px solid #007bff;\\n        background-color: #007bff;\\n        color: white;\\n        border-radius: 4px;\\n        cursor: pointer;\\n        transition: all 0.3s ease;\\n      }\\n\\n      .pagination-controls button:hover {\\n        background-color: #0056b3;\\n      }\\n\\n      .modal {\\n        display: none;\\n        position: fixed;\\n        z-index: 1;\\n        left: 0;\\n        top: 0;\\n        width: 100%;\\n        height: 100%;\\n        overflow: auto;\\n        background-color: rgba(0, 0, 0, 0.6);\\n      }\\n\\n      .modal-content {\\n        background-color: #fff;\\n        margin: 2% auto;\\n        padding: 20px;\\n        border: 1px solid #888;\\n        width: 90%;\\n        max-width: 1000px;\\n        border-radius: 8px;\\n        max-height: 90vh;\\n        overflow-y: auto;\\n        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);\\n        transition: all 0.3s ease;\\n      }\\n\\n      .modal-content div {\\n        margin-bottom: 20px;\\n        padding: 15px;\\n        border-radius: 8px;\\n        background-color: #f8f9fa;\\n        position: relative;\\n      }\\n\\n      .modal-content div:hover {\\n        background-color: #e9ecef;\\n      }\\n\\n      .close {\\n        color: #aaa;\\n        float: right;\\n        font-size: 28px;\\n        font-weight: bold;\\n        transition: all 0.3s ease;\\n      }\\n\\n      .close:hover,\\n      .close:focus {\\n        color: black;\\n        text-decoration: none;\\n        cursor: pointer;\\n      }\\n\\n      .error {\\n        color: red;\\n        margin-bottom: 20px;\\n        display: none;\\n        transition: all 0.3s ease;\\n      }\\n\\n      pre {\\n        background-color: #f8f9fa;\\n        padding: 10px;\\n        border-radius: 8px;\\n        overflow-x: auto;\\n        white-space: pre-wrap;\\n        word-wrap: break-word;\\n        margin-bottom: 10px;\\n      }\\n\\n      .json-key {\\n        color: #d73a49;\\n      }\\n\\n      .json-value {\\n        color: #22863a;\\n      }\\n\\n      .json-string {\\n        color: #032f62;\\n      }\\n\\n      .query-keyword {\\n        color: #d73a49;\\n        font-weight: bold;\\n      }\\n\\n      .query-string {\\n        color: #032f62;\\n      }\\n\\n      .query-value {\\n        color: #22863a;\\n      }\\n\\n      .btn-copy {\\n        background-color: #28a745;\\n        color: white;\\n        border: none;\\n        padding: 5px 10px;\\n        margin-bottom: 10px;\\n        cursor: pointer;\\n        border-radius: 4px;\\n        position: absolute;\\n        top: 10px;\\n        right: 10px;\\n        transition: all 0.3s ease;\\n      }\\n\\n      .btn-copy:hover {\\n        background-color: #218838;\\n      }\\n\\n      .btn-copy i {\\n        margin-right: 5px;\\n      }\\n\\n      .loader {\\n        position: fixed;\\n        z-index: 10;\\n        top: 0;\\n        left: 0;\\n        width: 100%;\\n        height: 100%;\\n        background: rgba(255, 255, 255, 0.8);\\n        display: flex;\\n        justify-content: center;\\n        align-items: center;\\n        display: none;\\n      }\\n\\n      .loader-content {\\n        padding: 20px;\\n        background: rgba(255, 255, 255, 0.9);\\n        backdrop-filter: blur(10px);\\n        border-radius: 10px;\\n        box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);\\n      }\\n\\n      .loader-content img {\\n        width: 50px;\\n        height: 50px;\\n      }\\n\\n      .rotate {\\n        animation: rotation 1s infinite linear;\\n      }\\n\\n      @keyframes rotation {\\n        from {\\n          transform: rotate(0deg);\\n        }\\n        to {\\n          transform: rotate(360deg);\\n        }\\n      }\\n\\n      #observabilityButton {\\n        background-color: red;\\n        color: white;\\n        font-weight: 500;\\n        border: none;\\n        padding: 5px 10px;\\n        margin-bottom: 10px;\\n        cursor: pointer;\\n        border-radius: 4px;\\n        transition: all 0.3s ease;\\n        font-size: 14px;\\n        padding: 5px 10px;\\n      }\\n\\n      #observabilityButton:hover {\\n        background-color: #c31a1a;\\n      }\\n\\n      #logoutButton {\\n        background-color: #2848a7;\\n        color: white;\\n        border: none;\\n        padding: 5px 10px;\\n        margin-bottom: 10px;\\n        cursor: pointer;\\n        border-radius: 4px;\\n        position: absolute;\\n        top: 10%;\\n        right: 10%;\\n        transition: all 0.3s ease;\\n      }\\n\\n      .logoutButton:hover {\\n        background-color: #1b6ab4;\\n      }\\n    </style>\\n  </head>\\n  <body>\\n    <div class=\"container\">\\n      <h1>Observability Logs</h1>\\n      <div>\\n        <div style=\"align-self: flex-end\">\\n          <button\\n            id=\"observabilityButton\"\\n            onclick=\"goToObservability()\"\\n            class=\"hidden\"\\n          >\\n            <- Versionamento\\n          </button>\\n        </div>\\n\\n        <div style=\"align-self: flex-end\">\\n          <button id=\"logoutButton\" onclick=\"logout()\" class=\"hidden\">\\n            Logout\\n          </button>\\n        </div>\\n      </div>\\n      <div class=\"error\" id=\"error-message\"></div>\\n      <div class=\"filters\">\\n        <input type=\"text\" id=\"filter-id\" placeholder=\"ID\" />\\n        <input\\n          type=\"text\"\\n          id=\"filter-endpointName\"\\n          placeholder=\"Endpoint Name\"\\n        />\\n        <input type=\"text\" id=\"filter-clinicName\" placeholder=\"Clinic Name\" />\\n        <input type=\"text\" id=\"filter-userName\" placeholder=\"User Name\" />\\n\\n        <select id=\"filter-http\">\\n          <option value=\"\">HTTP Method</option>\\n          <option value=\"GET\">GET</option>\\n          <option value=\"POST\">POST</option>\\n          <option value=\"PUT\">PUT</option>\\n          <option value=\"DELETE\">DELETE</option>\\n          <option value=\"PATCH\">PATCH</option>\\n        </select>\\n\\n        <div class=\"date-range-box\">\\n          <div>\\n            <label for=\"filter-initialDate\">Data Inicial:</label>\\n            <input type=\"date\" id=\"filter-initialDate\" />\\n          </div>\\n          <div>\\n            <label for=\"filter-finalDate\">Data Final:</label>\\n            <input type=\"date\" id=\"filter-finalDate\" />\\n          </div>\\n        </div>\\n\\n        <select id=\"page-size\" onchange=\"applyFilters()\">\\n          <option value=\"10\">10 por página</option>\\n          <option value=\"20\">20 por página</option>\\n          <option value=\"30\">30 por página</option>\\n          <option value=\"50\">50 por página</option>\\n        </select>\\n        <button onclick=\"applyFilters()\">Filtrar</button>\\n      </div>\\n      <table>\\n        <thead>\\n          <tr>\\n            <th>ID</th>\\n            <th>Endpoint Name</th>\\n            <th>Clinic Name</th>\\n            <th>Username</th>\\n            <th>Timestamp</th>\\n            <th>HTTP Method</th>\\n            <th>Actions</th>\\n          </tr>\\n        </thead>\\n        <tbody id=\"log-table-body\">\\n          <!-- Log rows will be populated here -->\\n        </tbody>\\n      </table>\\n      <div class=\"pagination-controls\">\\n        <button onclick=\"prevPage()\">Anterior</button>\\n        <span id=\"page-info\"></span>\\n        <button onclick=\"nextPage()\">Próxima</button>\\n      </div>\\n    </div>\\n\\n    <!-- The Modal -->\\n    <div id=\"logModal\" class=\"modal\">\\n      <div class=\"modal-content\">\\n        <span class=\"close\" onclick=\"closeModal()\">&times;</span>\\n        <div>\\n          <strong>Frontend URL:</strong> <span id=\"frontend-url\"></span>\\n          <button class=\"btn-copy\" onclick=\"copyText('frontend-url')\">\\n            <i class=\"fa fa-copy\"></i> Copiar\\n          </button>\\n        </div>\\n        <div>\\n          <strong>ID:</strong> <span id=\"log-id\"></span>\\n          <button class=\"btn-copy\" onclick=\"copyText('log-id')\">\\n            <i class=\"fa fa-copy\"></i> Copiar\\n          </button>\\n        </div>\\n        <div>\\n          <strong>Endpoint Name:</strong> <span id=\"endpoint-name\"></span>\\n          <button class=\"btn-copy\" onclick=\"copyText('endpoint-name')\">\\n            <i class=\"fa fa-copy\"></i> Copiar\\n          </button>\\n        </div>\\n        <div>\\n          <strong>Clinic Name:</strong> <span id=\"clinic-name\"></span>\\n          <button class=\"btn-copy\" onclick=\"copyText('clinic-name')\">\\n            <i class=\"fa fa-copy\"></i> Copiar\\n          </button>\\n        </div>\\n        <div>\\n          <strong>Username:</strong> <span id=\"username\"></span>\\n          <button class=\"btn-copy\" onclick=\"copyText('username')\">\\n            <i class=\"fa fa-copy\"></i> Copiar\\n          </button>\\n        </div>\\n        <div>\\n          <strong>Timestamp:</strong> <span id=\"timestamp\"></span>\\n          <button class=\"btn-copy\" onclick=\"copyText('timestamp')\">\\n            <i class=\"fa fa-copy\"></i> Copiar\\n          </button>\\n        </div>\\n        <div>\\n          <strong>HTTP Method:</strong> <span id=\"http-method\"></span>\\n          <button class=\"btn-copy\" onclick=\"copyText('http-method')\">\\n            <i class=\"fa fa-copy\"></i> Copiar\\n          </button>\\n        </div>\\n        <div>\\n          <strong>Request Body:</strong>\\n          <pre id=\"request-body\"></pre>\\n          <button class=\"btn-copy\" onclick=\"copyText('request-body')\">\\n            <i class=\"fa fa-copy\"></i> Copiar\\n          </button>\\n        </div>\\n        <div>\\n          <strong>Response Body:</strong>\\n          <pre id=\"response-body\"></pre>\\n          <button class=\"btn-copy\" onclick=\"copyText('response-body')\">\\n            <i class=\"fa fa-copy\"></i> Copiar\\n          </button>\\n        </div>\\n        <div>\\n          <strong>Executed Queries:</strong>\\n          <pre id=\"executed-queries\"></pre>\\n          <button class=\"btn-copy\" onclick=\"copyText('executed-queries')\">\\n            <i class=\"fa fa-copy\"></i> Copiar\\n          </button>\\n        </div>\\n\\n        <div>\\n          <strong>CURL:</strong>\\n          <pre id=\"curl\"></pre>\\n          <button class=\"btn-copy\" onclick=\"copyText('curl')\">\\n            <i class=\"fa fa-copy\"></i> Copiar\\n          </button>\\n        </div>\\n        <div>\\n          <strong>Request Info:</strong>\\n          <pre id=\"request-info\"></pre>\\n          <button class=\"btn-copy\" onclick=\"copyText('request-info')\">\\n            <i class=\"fa fa-copy\"></i> Copiar\\n          </button>\\n        </div>\\n      </div>\\n    </div>\\n\\n    <!-- Loader -->\\n    <div class=\"loader\" id=\"loader\">\\n      <div class=\"loader-content\">\\n        <img\\n          src=\"https://media.giphy.com/media/sSgvbe1m3n93G/giphy.gif\"\\n          alt=\"Loading...\"\\n          class=\"rotate\"\\n        />\\n      </div>\\n    </div>\\n\\n    <script>\\n      const apiUrl = `${window.location.origin}/api/v1/observability-logs`;\\n      let logs = [];\\n      let currentPage = 1;\\n      let pageSize = 10;\\n\\n      document.addEventListener('keypress', function (e) {\\n        if (e.key === 'Enter') {\\n          applyFilters();\\n        }\\n      });\\n\\n      async function fetchLogs(params = {}) {\\n        showLoader();\\n        const url = new URL(apiUrl);\\n        Object.keys(params).forEach((key) =>\\n          url.searchParams.append(key, params[key]),\\n        );\\n        url.searchParams.append('page', currentPage);\\n        url.searchParams.append('limit', pageSize);\\n\\n        // Obtém o token da sessionStorage\\n        const authToken = sessionStorage.getItem('authToken');\\n\\n        try {\\n          console.log(authToken);\\n          const response = await fetch(url, {\\n            method: 'GET',\\n            headers: {\\n              Authorization: `Bearer ${authToken}`, // Adiciona o token ao cabeçalho Authorization\\n              'Content-Type': 'application/json',\\n            },\\n          });\\n          if (!response.ok)\\n            throw new Error('Unauthorized || Failed to fetch logs');\\n\\n          const result = await response.json();\\n          logs = result; // Supondo que a resposta já esteja paginada\\n          renderPage();\\n        } catch (error) {\\n          showError(error.message);\\n        } finally {\\n          hideLoader();\\n        }\\n      }\\n\\n      function renderPage() {\\n        const logTableBody = document.getElementById('log-table-body');\\n        logTableBody.innerHTML = '';\\n\\n        if (logs.length === 0) {\\n          showError('No logs found with the specified filters.');\\n          return;\\n        }\\n\\n        logs.forEach((log) => {\\n          const row = `<tr>\\n                      <td>${log.id}</td>\\n                      <td title=\"${log.endpointName}\">${log.endpointName}</td>\\n                      <td title=\"${log.clinicName || ''}\">${log.clinicName || ''}</td>\\n                      <td>${log.username || ''}</td>\\n                      <td>${new Date(log.timestamp).toLocaleString()}</td>\\n                      <td>${log.http || ''}</td>\\n                      <td><button onclick=\"viewDetails(${log.id})\">View</button></td>\\n                    </tr>`;\\n          logTableBody.innerHTML += row;\\n        });\\n\\n        updatePageInfo();\\n      }\\n\\n      function updatePageInfo() {\\n        document.getElementById('page-info').textContent =\\n          `Página ${currentPage}`;\\n      }\\n\\n      function applyFilters() {\\n        const filters = {\\n          id: document.getElementById('filter-id').value,\\n          endpointName: document.getElementById('filter-endpointName').value,\\n          clinicName: document.getElementById('filter-clinicName').value,\\n          userName: document.getElementById('filter-userName').value,\\n          http: document.getElementById('filter-http').value,\\n          initialDate: document.getElementById('filter-initialDate').value,\\n          finalDate: document.getElementById('filter-finalDate').value,\\n        };\\n\\n        pageSize = parseInt(document.getElementById('page-size').value, 10);\\n        fetchLogs(filters);\\n      }\\n\\n      function viewDetails(logId) {\\n        const log = logs.find((log) => log.id === logId);\\n        if (log) {\\n          document.getElementById('frontend-url').textContent =\\n            log.frontendUrl || 'N/A';\\n          document.getElementById('log-id').textContent = log.id;\\n          document.getElementById('endpoint-name').textContent =\\n            log.endpointName;\\n          document.getElementById('clinic-name').textContent =\\n            log.clinicName || 'N/A';\\n          document.getElementById('username').textContent =\\n            log.username || 'N/A';\\n          document.getElementById('timestamp').textContent = new Date(\\n            log.timestamp,\\n          ).toLocaleString();\\n          document.getElementById('http-method').textContent =\\n            log.http || 'N/A';\\n          document.getElementById('request-body').innerHTML = formatJSON(\\n            log.requestBody,\\n          );\\n          document.getElementById('response-body').innerHTML = formatJSON(\\n            log.responseBody,\\n          );\\n          document.getElementById('executed-queries').innerHTML = formatQueries(\\n            log.executedQueries,\\n          );\\n          document.getElementById('curl').textContent = log.curl || 'N/A';\\n          document.getElementById('request-info').innerHTML = formatJSON(\\n            log.requestInfo,\\n          );\\n          document.getElementById('logModal').style.display = 'block';\\n        }\\n      }\\n\\n      function formatJSON(jsonString) {\\n        if (!jsonString) return 'N/A';\\n        try {\\n          const jsonObject = JSON.parse(jsonString);\\n          const formattedJSON = JSON.stringify(jsonObject, null, 2)\\n            .replace(/\\\\\"([^(\\\\\")\"]+)\\\\\":/g, '<span class=\"json-key\">\"$1\":</span>')\\n            .replace(/: \\\\\"(.*?)\\\\\"/g, ': <span class=\"json-string\">\"$1\"</span>')\\n            .replace(/: (\\\\d+)/g, ': <span class=\"json-value\">$1</span>');\\n          return `<pre>${formattedJSON}</pre>`;\\n        } catch (e) {\\n          return '<pre>N/A</pre>';\\n        }\\n      }\\n\\n      function formatQueries(queryString) {\\n        if (!queryString) return 'N/A';\\n\\n        try {\\n          const formattedJSON = JSON.stringify(queryString, null, 2)\\n            .replace(/\\\\\"([^(\\\\\")\"]+)\\\\\":/g, '<span class=\"json-key\">\"$1\":</span>')\\n            .replace(/: \\\\\"(.*?)\\\\\"/g, ': <span class=\"json-string\">\"$1\"</span>')\\n            .replace(/: (\\\\d+)/g, ': <span class=\"json-value\">$1</span>');\\n          return `<pre>${formattedJSON}</pre>`;\\n        } catch (e) {\\n          return '<pre>N/A</pre>';\\n        }\\n      }\\n\\n      function closeModal() {\\n        document.getElementById('logModal').style.display = 'none';\\n      }\\n\\n      function showError(message) {\\n        const errorMessage = document.getElementById('error-message');\\n        errorMessage.style.display = 'block';\\n        errorMessage.textContent = message;\\n      }\\n\\n      function nextPage() {\\n        currentPage++;\\n        applyFilters();\\n      }\\n\\n      function prevPage() {\\n        if (currentPage > 1) {\\n          currentPage--;\\n          applyFilters();\\n        }\\n      }\\n\\n      function showLoader() {\\n        document.getElementById('loader').style.display = 'flex';\\n      }\\n\\n      function hideLoader() {\\n        document.getElementById('loader').style.display = 'none';\\n      }\\n\\n      function copyText(elementId) {\\n        const text = document.getElementById(elementId).innerText;\\n        navigator.clipboard.writeText(text).then(() => {\\n          alert('Conteúdo copiado para a área de transferência!');\\n        });\\n      }\\n\\n      function goToObservability() {\\n        window.location.href = '/api/v1/versioning-interface';\\n      }\\n\\n      function logout() {\\n        sessionStorage.clear();\\n        localStorage.clear();\\n        goToObservability();\\n      }\\n\\n      window.onclick = function (event) {\\n        if (event.target == document.getElementById('logModal')) {\\n          closeModal();\\n        }\\n      };\\n    </script>\\n    <!-- Adiciona o ícone da biblioteca Font Awesome para o ícone de cópia -->\\n    <link\\n      rel=\"stylesheet\"\\n      href=\"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css\"\\n    />\\n  </body>\\n</html>\\n** to include **<head**","stop":1756818522828}],"attachments":[],"parameters":[],"labels":[{"name":"package","value":"cypress\\e2e\\AWS\\versao_api.cy.js"},{"name":"path","value":"cypress\\e2e\\AWS\\versao_api.cy.js"},{"name":"parentSuite","value":"Módulo - Versão API"},{"name":"suite","value":"Módulo - Versão API - Observability Interface"}],"links":[],"start":1756818519865,"name":"Validar retorno 200 - /api/v1/observability-interface","fullName":"Módulo - Versão API Módulo - Versão API - Observability Interface Validar retorno 200 - /api/v1/observability-interface","stop":1756818522838}